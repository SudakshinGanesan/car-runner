{"ast":null,"code":"import _objectSpread from\"/Users/ganesan/Documents/projects/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useRef,useState,useImperativeHandle,forwardRef}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SwipeCard=/*#__PURE__*/forwardRef(function SwipeCard(_ref,ref){let{id,onSwipe,onCardLeftScreen,disabled=false,style={},className=\"\",threshold=120,children}=_ref;const elRef=useRef(null);const startRef=useRef({x:0,y:0});const draggingRef=useRef(false);const[offset,setOffset]=useState({x:0,y:0});const[rot,setRot]=useState(0);const[isExiting,setIsExiting]=useState(false);useImperativeHandle(ref,()=>({swipe(){let direction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"right\";if(isExiting)return;const sign=direction===\"right\"?1:-1;setIsExiting(true);setOffset({x:sign*(window.innerWidth||1000),y:-100});setRot(sign*30);setTimeout(()=>{onSwipe&&onSwipe(direction);onCardLeftScreen&&onCardLeftScreen();},300);}}),[isExiting,onSwipe,onCardLeftScreen]);useEffect(()=>{const el=elRef.current;if(!el)return;function onPointerDown(e){if(disabled||isExiting)return;try{el.setPointerCapture(e.pointerId);}catch(_){}draggingRef.current=true;startRef.current={x:e.clientX,y:e.clientY};el.style.transition=\"none\";}function onPointerMove(e){if(!draggingRef.current)return;const dx=e.clientX-startRef.current.x;const dy=e.clientY-startRef.current.y;setOffset({x:dx,y:dy});setRot(Math.max(Math.min(dx/20,40),-40));}function onPointerUp(e){if(!draggingRef.current)return;draggingRef.current=false;try{el.releasePointerCapture(e.pointerId);}catch(_){}const dx=e.clientX-startRef.current.x;const dy=e.clientY-startRef.current.y;if(dx>threshold){setIsExiting(true);setOffset({x:window.innerWidth||1000,y:dy});setRot(30);el.style.transition=\"transform 300ms ease-out\";setTimeout(()=>{onSwipe&&onSwipe(\"right\");onCardLeftScreen&&onCardLeftScreen();},300);}else if(dx<-threshold){setIsExiting(true);setOffset({x:-(window.innerWidth||1000),y:dy});setRot(-30);el.style.transition=\"transform 200ms ease-out\";setTimeout(()=>{onSwipe&&onSwipe(\"left\");onCardLeftScreen&&onCardLeftScreen();},300);}else{el.style.transition=\"transform 200ms ease-out\";setOffset({x:0,y:0});setRot(0);}}el.addEventListener(\"pointerdown\",onPointerDown);window.addEventListener(\"pointermove\",onPointerMove);window.addEventListener(\"pointerup\",onPointerUp);return()=>{el.removeEventListener(\"pointerdown\",onPointerDown);window.removeEventListener(\"pointermove\",onPointerMove);window.removeEventListener(\"pointerup\",onPointerUp);};},[disabled,isExiting,onSwipe,onCardLeftScreen,threshold]);const transform=\"translate(\".concat(offset.x,\"px, \").concat(offset.y,\"px) rotate(\").concat(rot,\"deg)\");const baseStyle=_objectSpread({transform,touchAction:\"none\",cursor:disabled?\"default\":\"grab\",willChange:\"transform\"},style);return/*#__PURE__*/_jsxs(\"div\",{ref:elRef,style:baseStyle,className:className,\"aria-hidden\":isExiting,children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:8,left:8,pointerEvents:\"none\",fontSize:12,opacity:Math.min(Math.abs(offset.x)/200,1)},children:offset.x>0?\"LIKE →\":offset.x<0?\"← NOPE\":\"\"}),typeof children===\"function\"?children({offset,rot}):children]});});export default function SwipeFlicks(){var _votes$currentUser;const STORAGE_KEY=\"swipeflicks_state_v1\";const[isDarkMode,setIsDarkMode]=useState(()=>{const saved=localStorage.getItem(\"swipeflicks_darkmode\");return saved?JSON.parse(saved):false;});// Function to fetch top rated movies from TMDB\nconst fetchTopRatedMovies=async()=>{try{console.log('Fetching movies from TMDB...');const allMovies=[];// Try to fetch just the first page first to test the API\nconst testResponse=await fetch(\"https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=1&include_adult=false\");if(!testResponse.ok){throw new Error(\"TMDB API error: \".concat(testResponse.status,\" \").concat(testResponse.statusText));}const testData=await testResponse.json();console.log('TMDB API test successful, total pages available:',testData.total_pages);// Fetch top rated movies (up to 1000 movies, 50 movies per page, 20 pages max)\nconst maxPages=Math.min(testData.total_pages||20,20);for(let page=1;page<=maxPages;page++){console.log(\"Fetching page \".concat(page,\"/\").concat(maxPages,\"...\"));const response=await fetch(\"https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=\".concat(page,\"&include_adult=false\"));const data=await response.json();if(data.results&&data.results.length>0){const movies=data.results.map(movie=>({id:movie.id.toString(),title:movie.title,poster:movie.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(movie.poster_path):null,year:movie.release_date?new Date(movie.release_date).getFullYear():null,rating:movie.vote_average}));allMovies.push(...movies);console.log(\"Added \".concat(movies.length,\" movies from page \").concat(page,\", total: \").concat(allMovies.length));}else{console.log(\"No results on page \".concat(page,\", breaking early\"));break;}// Add a small delay to avoid rate limiting\nif(page<maxPages){await new Promise(resolve=>setTimeout(resolve,100));}}console.log(\"Successfully fetched \".concat(allMovies.length,\" movies from TMDB\"));// Shuffle the movies randomly\nconst shuffledMovies=allMovies.sort(()=>Math.random()-0.5);return shuffledMovies;}catch(error){console.error('Error fetching top rated movies from TMDB:',error);console.log('Falling back to sample movies...');// Fallback to sample movies if API fails\nconst fallbackMovies=[{id:\"1\",title:\"The Grand Budapest Hotel\",poster:\"https://image.tmdb.org/t/p/w500/1.jpg\",year:2014,rating:8.1},{id:\"2\",title:\"Inception\",poster:\"https://image.tmdb.org/t/p/w500/2.jpg\",year:2010,rating:8.8},{id:\"3\",title:\"Parasite\",poster:\"https://image.tmdb.org/t/p/w500/3.jpg\",year:2019,rating:8.6},{id:\"4\",title:\"Spirited Away\",poster:\"https://image.tmdb.org/t/p/w500/4.jpg\",year:2001,rating:8.6},{id:\"5\",title:\"La La Land\",poster:\"https://image.tmdb.org/t/p/w500/5.jpg\",year:2016,rating:8.0},{id:\"6\",title:\"The Shawshank Redemption\",poster:\"https://image.tmdb.org/t/p/w500/6.jpg\",year:1994,rating:9.3},{id:\"7\",title:\"Pulp Fiction\",poster:\"https://image.tmdb.org/t/p/w500/7.jpg\",year:1994,rating:8.9},{id:\"8\",title:\"The Dark Knight\",poster:\"https://image.tmdb.org/t/p/w500/8.jpg\",year:2008,rating:9.0},{id:\"9\",title:\"Fight Club\",poster:\"https://image.tmdb.org/t/p/w500/9.jpg\",year:1999,rating:8.8},{id:\"10\",title:\"Forrest Gump\",poster:\"https://image.tmdb.org/t/p/w500/10.jpg\",year:1994,rating:8.8}];return fallbackMovies;}};const loadState=async()=>{try{var _parsed$movies;console.log('Loading state...');const raw=localStorage.getItem(STORAGE_KEY);if(!raw){console.log('No saved state found, fetching fresh movies from TMDB...');const freshMovies=await fetchTopRatedMovies();return{movies:freshMovies,votes:{userA:[],userB:[]},lastFetched:Date.now()};}const parsed=JSON.parse(raw);console.log('Found saved state with',((_parsed$movies=parsed.movies)===null||_parsed$movies===void 0?void 0:_parsed$movies.length)||0,'movies');// Check if we need to refresh movies (e.g., on page refresh)\nconst shouldRefresh=!parsed.lastFetched||Date.now()-parsed.lastFetched>24*60*60*1000;// 24 hours\nif(shouldRefresh){console.log('State is old, refreshing movies...');const freshMovies=await fetchTopRatedMovies();return{movies:freshMovies,votes:parsed.votes||{userA:[],userB:[]},lastFetched:Date.now()};}// If we have movies in storage, use them\nif(parsed.movies&&parsed.movies.length>0){console.log('Using saved movies from storage');return{movies:parsed.movies,votes:parsed.votes||{userA:[],userB:[]},lastFetched:parsed.lastFetched};}// If no movies in storage, fetch fresh ones\nconsole.log('No movies in storage, fetching fresh ones...');const freshMovies=await fetchTopRatedMovies();return{movies:freshMovies,votes:parsed.votes||{userA:[],userB:[]},lastFetched:Date.now()};}catch(e){console.warn(\"Failed to load state, fetching fresh movies.\",e);const freshMovies=await fetchTopRatedMovies();return{movies:freshMovies,votes:{userA:[],userB:[]},lastFetched:Date.now()};}};const[movies,setMovies]=useState([]);const[votes,setVotes]=useState({userA:[],userB:[]});const[currentUser,setCurrentUser]=useState(\"userA\");const[lastDirection,setLastDirection]=useState(null);const[newTitle,setNewTitle]=useState(\"\");const[newPoster,setNewPoster]=useState(\"\");const[currentIndex,setCurrentIndex]=useState(0);const[searchQuery,setSearchQuery]=useState(\"\");const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const[isLoading,setIsLoading]=useState(true);// Initialize movies on component mount\nuseEffect(()=>{const initializeMovies=async()=>{setIsLoading(true);try{// Force fresh fetch on app start by clearing old data\nconsole.log('Clearing old data and fetching fresh movies...');localStorage.removeItem(STORAGE_KEY);const state=await loadState();console.log('Initialized with',state.movies.length,'movies');setMovies(state.movies);setVotes(state.votes);}catch(error){console.error('Failed to initialize movies:',error);// Fallback to sample movies if everything fails\nconst fallbackMovies=[{id:\"1\",title:\"The Grand Budapest Hotel\",poster:\"https://image.tmdb.org/t/p/w500/1.jpg\",year:2014,rating:8.1},{id:\"2\",title:\"Inception\",poster:\"https://image.tmdb.org/t/p/w500/2.jpg\",year:2010,rating:8.8},{id:\"3\",title:\"Parasite\",poster:\"https://image.tmdb.org/t/p/w500/3.jpg\",year:2019,rating:8.6},{id:\"4\",title:\"Spirited Away\",poster:\"https://image.tmdb.org/t/p/w500/4.jpg\",year:2001,rating:8.6},{id:\"5\",title:\"La La Land\",poster:\"https://image.tmdb.org/t/p/w500/5.jpg\",year:2016,rating:8.0}];setMovies(fallbackMovies);setVotes({userA:[],userB:[]});}finally{setIsLoading(false);}};initializeMovies();},[]);useEffect(()=>{const payload={movies,votes,lastFetched:Date.now()};try{localStorage.setItem(STORAGE_KEY,JSON.stringify(payload));}catch(e){console.warn(\"Failed to save state.\",e);}},[movies,votes]);useEffect(()=>{localStorage.setItem(\"swipeflicks_darkmode\",JSON.stringify(isDarkMode));},[isDarkMode]);// Reset current index when user changes so they see all movies\nuseEffect(()=>{setCurrentIndex(0);},[currentUser]);const matches=useMemo(()=>{const a=new Set(votes.userA||[]);const b=new Set(votes.userB||[]);const common=[...a].filter(id=>b.has(id));return movies.filter(m=>common.includes(m.id));},[votes,movies]);function handleSwipe(direction,movieId){const movie=movies.find(m=>m.id===movieId);const movieTitle=movie?movie.title:movieId;setLastDirection(direction+\" (\"+movieTitle+\")\");if(direction===\"right\"){setVotes(prev=>{const copy={userA:[...(prev.userA||[])],userB:[...(prev.userB||[])]};if(!copy[currentUser].includes(movieId))copy[currentUser].push(movieId);return copy;});}else if(direction===\"left\"){setVotes(prev=>{const copy={userA:[...(prev.userA||[])],userB:[...(prev.userB||[])]};copy[currentUser]=copy[currentUser].filter(id=>id!==movieId);return copy;});}}function addMovie(e){e.preventDefault();if(!newTitle.trim())return;const id=Date.now().toString();const movie={id,title:newTitle.trim(),poster:newPoster.trim()};setMovies(m=>[movie,...m]);setCurrentIndex(0);setNewTitle(\"\");setNewPoster(\"\");}async function resetAll(){if(!window.confirm(\"Reset all movies and votes?\"))return;setIsLoading(true);try{const freshMovies=await fetchTopRatedMovies();setMovies(freshMovies);setVotes({userA:[],userB:[]});setCurrentIndex(0);localStorage.removeItem(STORAGE_KEY);}catch(error){console.error('Error resetting movies:',error);alert('Error resetting movies. Please try again.');}finally{setIsLoading(false);}}function exportJSON(){const blob=new Blob([JSON.stringify({movies,votes},null,2)],{type:\"application/json\"});const url=URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=\"swipeflicks_export.json\";a.click();URL.revokeObjectURL(url);}async function searchMovies(query){if(!query.trim())return;setIsSearching(true);try{// Using TMDB API (free, no API key required for basic search)\nconst response=await fetch(\"https://api.themoviedb.org/3/search/movie?api_key=d9b9ed074847fbc46cffd0144177f7dc&query=\".concat(encodeURIComponent(query),\"&language=en-US&page=1&include_adult=false\"));const data=await response.json();if(data.results){const movies=data.results.slice(0,10).map(movie=>({id:movie.id.toString(),title:movie.title,poster:movie.poster_path?\"https://image.tmdb.org/t/p/w500\".concat(movie.poster_path):null,year:movie.release_date?new Date(movie.release_date).getFullYear():null}));setSearchResults(movies);}}catch(error){console.error('Error searching movies:',error);alert('Error searching movies. Please try again.');}finally{setIsSearching(false);}}function addMovieFromSearch(movie){const newMovie={id:Date.now().toString(),title:movie.title,poster:movie.poster};setMovies(m=>[newMovie,...m]);setCurrentIndex(0);setSearchResults([]);setSearchQuery(\"\");}function importJSON(e){const file=e.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=ev=>{try{const parsed=JSON.parse(ev.target.result);if(parsed.movies)setMovies(parsed.movies);if(parsed.votes)setVotes(parsed.votes);setCurrentIndex(0);alert(\"Imported!\");}catch(err){alert(\"Invalid JSON file\");}};reader.readAsText(file);}const remaining=movies.slice(currentIndex);function onCardSwiped(direction,movieId){handleSwipe(direction,movieId);setTimeout(()=>setCurrentIndex(ci=>Math.min(ci+1,movies.length)),50);}function programmaticSwipe(direction){if(remaining.length===0)return;const top=remaining[0];handleSwipe(direction,top.id);setCurrentIndex(ci=>Math.min(ci+1,movies.length));}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen p-6 flex flex-col items-center transition-colors duration-200 bg-[#141414] text-white font-sans\",style:{fontFamily:\"'Helvetica Neue', Helvetica, Arial, sans-serif\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-3xl\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"flex items-center justify-between mb-6 bg-black px-6 py-4 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white tracking-tight\",children:\"SwipeFlicks\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[\"Two-person movie picker \\u2022 Local-only\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-[#e50914]\",children:[currentUser===\"userA\"?\"You\":\"Partner\",\": \",((_votes$currentUser=votes[currentUser])===null||_votes$currentUser===void 0?void 0:_votes$currentUser.length)||0,\" movies liked\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsDarkMode(!isDarkMode),className:\"p-2 rounded-full bg-[#e50914] text-white hover:bg-red-700 transition-all duration-300 ease-in-out\",title:isDarkMode?'Switch to Light Mode':'Switch to Dark Mode',children:isDarkMode?'☀️':'🌙'})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-6 flex gap-2 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400\",children:\"Current:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentUser(\"userA\"),className:\"px-3 py-1 rounded font-semibold transition-all duration-300 ease-in-out \".concat(currentUser===\"userA\"?\"bg-[#e50914] text-white hover:bg-red-700\":\"bg-transparent border border-white text-white hover:bg-white hover:text-black\"),children:\"You\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentUser(\"userB\"),className:\"px-3 py-1 rounded font-semibold transition-all duration-300 ease-in-out \".concat(currentUser===\"userB\"?\"bg-[#e50914] text-white hover:bg-red-700\":\"bg-transparent border border-white text-white hover:bg-white hover:text-black\"),children:\"Partner\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{setIsLoading(true);try{const freshMovies=await fetchTopRatedMovies();setMovies(freshMovies);setCurrentIndex(0);alert(\"Movies refreshed! Loaded \".concat(freshMovies.length,\" movies from TMDB.\"));}catch(error){console.error('Error refreshing movies:',error);alert('Error refreshing movies. Please try again.');}finally{setIsLoading(false);}},disabled:isLoading,className:\"px-3 py-1 rounded border transition-all duration-300 ease-in-out \".concat(isLoading?'bg-[#181818] text-gray-400 cursor-not-allowed':'border-white text-white bg-transparent hover:bg-white hover:text-black'),children:isLoading?'🔄 Refreshing...':'🔄 Refresh Movies'}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{var _data$results;const testUrl='https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=1&include_adult=false';console.log('Testing TMDB API with URL:',testUrl);const response=await fetch(testUrl);const data=await response.json();console.log('Raw TMDB API response text:',JSON.stringify(data,null,2));alert(\"TMDB API Test: Status \".concat(response.status,\", Found \").concat(((_data$results=data.results)===null||_data$results===void 0?void 0:_data$results.length)||0,\" movies on page 1\"));}catch(error){console.error('TMDB API test failed:',error);alert(\"TMDB API test failed: \".concat(error.message));}},className:\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\",children:\"\\uD83E\\uDDEA Test API\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportJSON,className:\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\",children:\"Export\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black cursor-pointer transition-all duration-300 ease-in-out\",children:[\"Import\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"application/json\",onChange:importJSON,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetAll,className:\"px-3 py-1 rounded border border-[#e50914] text-[#e50914] bg-transparent hover:bg-[#e50914] hover:text-white transition-all duration-300 ease-in-out\",children:\"Reset\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative h-96 rounded-lg shadow-lg p-6 flex items-center justify-center overflow-hidden bg-[#181818]\",children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center gap-3 \".concat(isDarkMode?'text-gray-300':'text-gray-600'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Fetching top 1000 movies from TMDB...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm opacity-75\",children:\"This may take a few seconds\"})]}):remaining.length===0?/*#__PURE__*/_jsx(\"div\",{className:isDarkMode?'text-gray-300':'text-gray-600',children:\"No more movies. Add some!\"}):remaining.map((movie,idx)=>{var _votes$currentUser2;const depth=remaining.length-idx;const isTop=idx===0;return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",zIndex:depth,left:\"50%\",top:\"50%\",transform:\"translate(-50%, -50%) scale(\".concat(1-idx*0.02,\") translateY(\").concat(idx*8,\"px)\"),transition:\"transform 200ms\"},className:\"transition-all duration-300 ease-in-out\",children:/*#__PURE__*/_jsx(SwipeCard,{id:movie.id,onSwipe:dir=>onCardSwiped(dir,movie.id),onCardLeftScreen:()=>{},disabled:!isTop,className:\"w-64 md:w-80 h-48 md:h-64 rounded-lg shadow-lg overflow-hidden flex flex-col bg-[#181818] hover:scale-105 transition-all duration-300 ease-in-out\",style:{touchAction:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex flex-col\",children:[movie.poster?/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.title,className:\"object-cover h-2/3 w-full transition-all duration-300 ease-in-out shadow-md hover:scale-105\",onError:e=>{e.currentTarget.style.display='none';},style:{boxShadow:\"0 8px 24px rgba(0,0,0,0.5)\"}}):/*#__PURE__*/_jsx(\"div\",{className:\"h-2/3 w-full flex items-center justify-center text-gray-400 bg-[#141414]\",children:\"No poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 flex items-center justify-between flex-1 bg-[#181818]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-lg text-white\",children:movie.title}),movie.year&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:movie.year}),movie.rating&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-yellow-400\",children:[\"\\u2B50 \",movie.rating,\"/10\"]}),((_votes$currentUser2=votes[currentUser])===null||_votes$currentUser2===void 0?void 0:_votes$currentUser2.includes(movie.id))&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-400 font-medium\",children:\"\\u2713 You liked this\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"Swipe \\u2192 to like\"})]})]})})},movie.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 rounded-lg shadow-lg flex flex-col items-center gap-3 bg-[#181818]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>programmaticSwipe(\"left\"),className:\"px-4 py-2 border border-white text-white bg-transparent rounded transition-all duration-300 ease-in-out hover:bg-white hover:text-black\",children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>programmaticSwipe(\"right\"),className:\"px-4 py-2 bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\",children:\"\\u2192\"})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:addMovie,className:\"flex flex-col items-center gap-3 w-full max-w-md\",children:/*#__PURE__*/_jsx(\"button\",{className:\"px-6 py-2 bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\",children:\"Add Movie\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Search for real movies...\",className:\"flex-1 border border-[#181818] p-2 rounded bg-[#141414] text-white placeholder-gray-400\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>searchMovies(searchQuery),disabled:isSearching,className:\"px-4 py-2 rounded transition-all duration-300 ease-in-out \".concat(isSearching?'bg-[#181818] text-gray-400 cursor-not-allowed':'bg-[#e50914] text-white hover:bg-red-700'),children:isSearching?'Searching...':'Search'})]}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"max-h-48 overflow-y-auto rounded border border-[#181818] bg-[#181818]\",children:searchResults.map(movie=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2 border-b border-[#181818] last:border-b-0 hover:bg-[#222] cursor-pointer transition-all duration-300 ease-in-out\",onClick:()=>addMovieFromSearch(movie),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[movie.poster?/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.title,className:\"w-12 h-16 object-cover rounded shadow\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-16 rounded flex items-center justify-center text-xs bg-[#222] text-gray-400\",children:\"No poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white\",children:movie.title}),movie.year&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:movie.year})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 text-xs bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\",children:\"Add\"})]})},movie.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 rounded-lg shadow-lg bg-[#181818]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[\"Last action: \",lastDirection||\"—\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setVotes(_objectSpread(_objectSpread({},votes),{},{[currentUser]:[]})),className:\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\",children:\"Clear my likes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _votes$userA,_votes$userB;const userAVotes=((_votes$userA=votes.userA)===null||_votes$userA===void 0?void 0:_votes$userA.map(id=>{var _movies$find;return((_movies$find=movies.find(m=>m.id===id))===null||_movies$find===void 0?void 0:_movies$find.title)||id;}))||[];const userBVotes=((_votes$userB=votes.userB)===null||_votes$userB===void 0?void 0:_votes$userB.map(id=>{var _movies$find2;return((_movies$find2=movies.find(m=>m.id===id))===null||_movies$find2===void 0?void 0:_movies$find2.title)||id;}))||[];const voteSummary={\"You liked\":userAVotes,\"Partner liked\":userBVotes};alert(JSON.stringify(voteSummary,null,2));},className:\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\",children:\"Show votes\"})]})]})]}),/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow-lg mb-4 bg-[#181818]\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"font-semibold mb-2 text-white\",children:[\"Matches (\",matches.length,\")\"]}),matches.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:\"No matches yet \\u2014 keep swiping!\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:matches.map(m=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center gap-3\",children:[m.poster?/*#__PURE__*/_jsx(\"img\",{src:m.poster,alt:\"\",className:\"w-12 h-16 object-cover rounded shadow\",onError:e=>{e.currentTarget.style.display='none';}}):/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-16 rounded bg-[#222]\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white\",children:m.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-[#e50914]\",children:\"Both liked\"})]})]},m.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow-lg mb-4 bg-[#181818]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2 text-white\",children:\"Quick stats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-300\",children:[\"You liked: \",(votes.userA||[]).length]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-300\",children:[\"Partner liked: \",(votes.userB||[]).length]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-300\",children:[\"Movies from TMDB: \",movies.length]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:\"Top 1000 rated movies\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow-lg bg-[#181818]\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2 text-white\",children:\"Movie list\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-auto\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2 text-sm\",children:movies.map(m=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center justify-between gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"truncate font-medium text-white\",children:m.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs opacity-75 text-gray-400\",children:[m.year&&/*#__PURE__*/_jsx(\"span\",{children:m.year}),m.rating&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2B50 \",m.rating]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMovies(arr=>arr.filter(x=>x.id!==m.id)),className:\"px-2 py-1 border border-[#e50914] text-[#e50914] rounded text-xs bg-transparent hover:bg-[#e50914] hover:text-white transition-all duration-300 ease-in-out\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const t=prompt('Edit title',m.title);if(t!=null){setMovies(ms=>ms.map(mm=>mm.id===m.id?_objectSpread(_objectSpread({},mm),{},{title:t}):mm));}},className:\"px-2 py-1 border border-white text-white rounded text-xs bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\",children:\"Edit\"})]})]},m.id))})})]})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"mt-6 text-sm text-gray-400\",children:\"Tip: Switch user to let your partner swipe \\u2014 matches update when both like the same movie.\"})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useImperativeHandle","forwardRef","jsx","_jsx","jsxs","_jsxs","SwipeCard","_ref","ref","id","onSwipe","onCardLeftScreen","disabled","style","className","threshold","children","elRef","startRef","x","y","draggingRef","offset","setOffset","rot","setRot","isExiting","setIsExiting","swipe","direction","arguments","length","undefined","sign","window","innerWidth","setTimeout","el","current","onPointerDown","e","setPointerCapture","pointerId","_","clientX","clientY","transition","onPointerMove","dx","dy","Math","max","min","onPointerUp","releasePointerCapture","addEventListener","removeEventListener","transform","concat","baseStyle","_objectSpread","touchAction","cursor","willChange","position","top","left","pointerEvents","fontSize","opacity","abs","SwipeFlicks","_votes$currentUser","STORAGE_KEY","isDarkMode","setIsDarkMode","saved","localStorage","getItem","JSON","parse","fetchTopRatedMovies","console","log","allMovies","testResponse","fetch","ok","Error","status","statusText","testData","json","total_pages","maxPages","page","response","data","results","movies","map","movie","toString","title","poster","poster_path","year","release_date","Date","getFullYear","rating","vote_average","push","Promise","resolve","shuffledMovies","sort","random","error","fallbackMovies","loadState","_parsed$movies","raw","freshMovies","votes","userA","userB","lastFetched","now","parsed","shouldRefresh","warn","setMovies","setVotes","currentUser","setCurrentUser","lastDirection","setLastDirection","newTitle","setNewTitle","newPoster","setNewPoster","currentIndex","setCurrentIndex","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","isLoading","setIsLoading","initializeMovies","removeItem","state","payload","setItem","stringify","matches","a","Set","b","common","filter","has","m","includes","handleSwipe","movieId","find","movieTitle","prev","copy","addMovie","preventDefault","trim","resetAll","confirm","alert","exportJSON","blob","Blob","type","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","searchMovies","query","encodeURIComponent","slice","addMovieFromSearch","newMovie","importJSON","file","target","files","reader","FileReader","onload","ev","result","err","readAsText","remaining","onCardSwiped","ci","programmaticSwipe","fontFamily","onClick","_data$results","testUrl","message","accept","onChange","idx","_votes$currentUser2","depth","isTop","zIndex","dir","src","alt","onError","currentTarget","display","boxShadow","onSubmit","value","placeholder","_votes$userA","_votes$userB","userAVotes","_movies$find","userBVotes","_movies$find2","voteSummary","arr","t","prompt","ms","mm"],"sources":["/Users/ganesan/Documents/projects/src/SwipeFlicks.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState, useImperativeHandle, forwardRef } from \"react\";\n\nconst SwipeCard = forwardRef(function SwipeCard({ id, onSwipe, onCardLeftScreen, disabled = false, style = {}, className = \"\", threshold = 120, children }, ref) {\n  const elRef = useRef(null);\n  const startRef = useRef({ x: 0, y: 0 });\n  const draggingRef = useRef(false);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [rot, setRot] = useState(0);\n  const [isExiting, setIsExiting] = useState(false);\n\n  useImperativeHandle(ref, () => ({\n    swipe(direction = \"right\") {\n      if (isExiting) return;\n      const sign = direction === \"right\" ? 1 : -1;\n      setIsExiting(true);\n      setOffset({ x: sign * (window.innerWidth || 1000), y: -100 });\n      setRot(sign * 30);\n      setTimeout(() => {\n        onSwipe && onSwipe(direction);\n        onCardLeftScreen && onCardLeftScreen();\n      }, 300);\n    }\n  }), [isExiting, onSwipe, onCardLeftScreen]);\n\n  useEffect(() => {\n    const el = elRef.current;\n    if (!el) return;\n\n    function onPointerDown(e) {\n      if (disabled || isExiting) return;\n      try {\n        el.setPointerCapture(e.pointerId);\n      } catch (_) {}\n      draggingRef.current = true;\n      startRef.current = { x: e.clientX, y: e.clientY };\n      el.style.transition = \"none\";\n    }\n\n    function onPointerMove(e) {\n      if (!draggingRef.current) return;\n      const dx = e.clientX - startRef.current.x;\n      const dy = e.clientY - startRef.current.y;\n      setOffset({ x: dx, y: dy });\n      setRot(Math.max(Math.min(dx / 20, 40), -40));\n    }\n\n    function onPointerUp(e) {\n      if (!draggingRef.current) return;\n      draggingRef.current = false;\n      try {\n        el.releasePointerCapture(e.pointerId);\n      } catch (_) {}\n      const dx = e.clientX - startRef.current.x;\n      const dy = e.clientY - startRef.current.y;\n      if (dx > threshold) {\n        setIsExiting(true);\n        setOffset({ x: (window.innerWidth || 1000), y: dy });\n        setRot(30);\n        el.style.transition = \"transform 300ms ease-out\";\n        setTimeout(() => {\n          onSwipe && onSwipe(\"right\");\n          onCardLeftScreen && onCardLeftScreen();\n        }, 300);\n      } else if (dx < -threshold) {\n        setIsExiting(true);\n        setOffset({ x: -(window.innerWidth || 1000), y: dy });\n        setRot(-30);\n        el.style.transition = \"transform 200ms ease-out\";\n        setTimeout(() => {\n          onSwipe && onSwipe(\"left\");\n          onCardLeftScreen && onCardLeftScreen();\n        }, 300);\n      } else {\n        el.style.transition = \"transform 200ms ease-out\";\n        setOffset({ x: 0, y: 0 });\n        setRot(0);\n      }\n    }\n\n    el.addEventListener(\"pointerdown\", onPointerDown);\n    window.addEventListener(\"pointermove\", onPointerMove);\n    window.addEventListener(\"pointerup\", onPointerUp);\n\n    return () => {\n      el.removeEventListener(\"pointerdown\", onPointerDown);\n      window.removeEventListener(\"pointermove\", onPointerMove);\n      window.removeEventListener(\"pointerup\", onPointerUp);\n    };\n  }, [disabled, isExiting, onSwipe, onCardLeftScreen, threshold]);\n\n  const transform = `translate(${offset.x}px, ${offset.y}px) rotate(${rot}deg)`;\n  const baseStyle = {\n    transform,\n    touchAction: \"none\",\n    cursor: disabled ? \"default\" : \"grab\",\n    willChange: \"transform\",\n    ...style\n  };\n\n  return (\n    <div\n      ref={elRef}\n      style={baseStyle}\n      className={className}\n      aria-hidden={isExiting}\n    >\n      <div style={{ position: \"absolute\", top: 8, left: 8, pointerEvents: \"none\", fontSize: 12, opacity: Math.min(Math.abs(offset.x) / 200, 1) }}>\n        {offset.x > 0 ? \"LIKE →\" : offset.x < 0 ? \"← NOPE\" : \"\"}\n      </div>\n      {typeof children === \"function\" ? children({ offset, rot }) : children}\n    </div>\n  );\n});\n\nexport default function SwipeFlicks() {\n  const STORAGE_KEY = \"swipeflicks_state_v1\";\n  const [isDarkMode, setIsDarkMode] = useState(() => {\n    const saved = localStorage.getItem(\"swipeflicks_darkmode\");\n    return saved ? JSON.parse(saved) : false;\n  });\n\n  // Function to fetch top rated movies from TMDB\n  const fetchTopRatedMovies = async () => {\n    try {\n      console.log('Fetching movies from TMDB...');\n      const allMovies = [];\n      \n      // Try to fetch just the first page first to test the API\n      const testResponse = await fetch(`https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=1&include_adult=false`);\n      \n      if (!testResponse.ok) {\n        throw new Error(`TMDB API error: ${testResponse.status} ${testResponse.statusText}`);\n      }\n      \n      const testData = await testResponse.json();\n      console.log('TMDB API test successful, total pages available:', testData.total_pages);\n      \n      // Fetch top rated movies (up to 1000 movies, 50 movies per page, 20 pages max)\n      const maxPages = Math.min(testData.total_pages || 20, 20);\n      \n      for (let page = 1; page <= maxPages; page++) {\n        console.log(`Fetching page ${page}/${maxPages}...`);\n        const response = await fetch(`https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=${page}&include_adult=false`);\n        const data = await response.json();\n        \n        if (data.results && data.results.length > 0) {\n          const movies = data.results.map(movie => ({\n            id: movie.id.toString(),\n            title: movie.title,\n            poster: movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : null,\n            year: movie.release_date ? new Date(movie.release_date).getFullYear() : null,\n            rating: movie.vote_average\n          }));\n          allMovies.push(...movies);\n          console.log(`Added ${movies.length} movies from page ${page}, total: ${allMovies.length}`);\n        } else {\n          console.log(`No results on page ${page}, breaking early`);\n          break;\n        }\n        \n        // Add a small delay to avoid rate limiting\n        if (page < maxPages) {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        }\n      }\n      \n      console.log(`Successfully fetched ${allMovies.length} movies from TMDB`);\n      \n      // Shuffle the movies randomly\n      const shuffledMovies = allMovies.sort(() => Math.random() - 0.5);\n      \n      return shuffledMovies;\n    } catch (error) {\n      console.error('Error fetching top rated movies from TMDB:', error);\n      console.log('Falling back to sample movies...');\n      \n      // Fallback to sample movies if API fails\n      const fallbackMovies = [\n        { id: \"1\", title: \"The Grand Budapest Hotel\", poster: \"https://image.tmdb.org/t/p/w500/1.jpg\", year: 2014, rating: 8.1 },\n        { id: \"2\", title: \"Inception\", poster: \"https://image.tmdb.org/t/p/w500/2.jpg\", year: 2010, rating: 8.8 },\n        { id: \"3\", title: \"Parasite\", poster: \"https://image.tmdb.org/t/p/w500/3.jpg\", year: 2019, rating: 8.6 },\n        { id: \"4\", title: \"Spirited Away\", poster: \"https://image.tmdb.org/t/p/w500/4.jpg\", year: 2001, rating: 8.6 },\n        { id: \"5\", title: \"La La Land\", poster: \"https://image.tmdb.org/t/p/w500/5.jpg\", year: 2016, rating: 8.0 },\n        { id: \"6\", title: \"The Shawshank Redemption\", poster: \"https://image.tmdb.org/t/p/w500/6.jpg\", year: 1994, rating: 9.3 },\n        { id: \"7\", title: \"Pulp Fiction\", poster: \"https://image.tmdb.org/t/p/w500/7.jpg\", year: 1994, rating: 8.9 },\n        { id: \"8\", title: \"The Dark Knight\", poster: \"https://image.tmdb.org/t/p/w500/8.jpg\", year: 2008, rating: 9.0 },\n        { id: \"9\", title: \"Fight Club\", poster: \"https://image.tmdb.org/t/p/w500/9.jpg\", year: 1999, rating: 8.8 },\n        { id: \"10\", title: \"Forrest Gump\", poster: \"https://image.tmdb.org/t/p/w500/10.jpg\", year: 1994, rating: 8.8 }\n      ];\n      \n      return fallbackMovies;\n    }\n  };\n\n  const loadState = async () => {\n    try {\n      console.log('Loading state...');\n      const raw = localStorage.getItem(STORAGE_KEY);\n      \n      if (!raw) {\n        console.log('No saved state found, fetching fresh movies from TMDB...');\n        const freshMovies = await fetchTopRatedMovies();\n        return { movies: freshMovies, votes: { userA: [], userB: [] }, lastFetched: Date.now() };\n      }\n      \n      const parsed = JSON.parse(raw);\n      console.log('Found saved state with', parsed.movies?.length || 0, 'movies');\n      \n      // Check if we need to refresh movies (e.g., on page refresh)\n      const shouldRefresh = !parsed.lastFetched || \n        (Date.now() - parsed.lastFetched) > (24 * 60 * 60 * 1000); // 24 hours\n      \n      if (shouldRefresh) {\n        console.log('State is old, refreshing movies...');\n        const freshMovies = await fetchTopRatedMovies();\n        return { \n          movies: freshMovies, \n          votes: parsed.votes || { userA: [], userB: [] },\n          lastFetched: Date.now()\n        };\n      }\n      \n      // If we have movies in storage, use them\n      if (parsed.movies && parsed.movies.length > 0) {\n        console.log('Using saved movies from storage');\n        return {\n          movies: parsed.movies,\n          votes: parsed.votes || { userA: [], userB: [] },\n          lastFetched: parsed.lastFetched\n        };\n      }\n      \n      // If no movies in storage, fetch fresh ones\n      console.log('No movies in storage, fetching fresh ones...');\n      const freshMovies = await fetchTopRatedMovies();\n      return { \n        movies: freshMovies, \n        votes: parsed.votes || { userA: [], userB: [] }, \n        lastFetched: Date.now() \n      };\n      \n    } catch (e) {\n      console.warn(\"Failed to load state, fetching fresh movies.\", e);\n      const freshMovies = await fetchTopRatedMovies();\n      return { movies: freshMovies, votes: { userA: [], userB: [] }, lastFetched: Date.now() };\n    }\n  };\n\n  const [movies, setMovies] = useState([]);\n  const [votes, setVotes] = useState({ userA: [], userB: [] });\n  const [currentUser, setCurrentUser] = useState(\"userA\");\n  const [lastDirection, setLastDirection] = useState(null);\n  const [newTitle, setNewTitle] = useState(\"\");\n  const [newPoster, setNewPoster] = useState(\"\");\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Initialize movies on component mount\n  useEffect(() => {\n    const initializeMovies = async () => {\n      setIsLoading(true);\n      try {\n        // Force fresh fetch on app start by clearing old data\n        console.log('Clearing old data and fetching fresh movies...');\n        localStorage.removeItem(STORAGE_KEY);\n        \n        const state = await loadState();\n        console.log('Initialized with', state.movies.length, 'movies');\n        setMovies(state.movies);\n        setVotes(state.votes);\n      } catch (error) {\n        console.error('Failed to initialize movies:', error);\n        // Fallback to sample movies if everything fails\n        const fallbackMovies = [\n          { id: \"1\", title: \"The Grand Budapest Hotel\", poster: \"https://image.tmdb.org/t/p/w500/1.jpg\", year: 2014, rating: 8.1 },\n          { id: \"2\", title: \"Inception\", poster: \"https://image.tmdb.org/t/p/w500/2.jpg\", year: 2010, rating: 8.8 },\n          { id: \"3\", title: \"Parasite\", poster: \"https://image.tmdb.org/t/p/w500/3.jpg\", year: 2019, rating: 8.6 },\n          { id: \"4\", title: \"Spirited Away\", poster: \"https://image.tmdb.org/t/p/w500/4.jpg\", year: 2001, rating: 8.6 },\n          { id: \"5\", title: \"La La Land\", poster: \"https://image.tmdb.org/t/p/w500/5.jpg\", year: 2016, rating: 8.0 }\n        ];\n        setMovies(fallbackMovies);\n        setVotes({ userA: [], userB: [] });\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    initializeMovies();\n  }, []);\n\n  useEffect(() => {\n    const payload = { movies, votes, lastFetched: Date.now() };\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));\n    } catch (e) {\n      console.warn(\"Failed to save state.\", e);\n    }\n  }, [movies, votes]);\n\n  useEffect(() => {\n    localStorage.setItem(\"swipeflicks_darkmode\", JSON.stringify(isDarkMode));\n  }, [isDarkMode]);\n\n  // Reset current index when user changes so they see all movies\n  useEffect(() => {\n    setCurrentIndex(0);\n  }, [currentUser]);\n\n  const matches = useMemo(() => {\n    const a = new Set(votes.userA || []);\n    const b = new Set(votes.userB || []);\n    const common = [...a].filter((id) => b.has(id));\n    return movies.filter((m) => common.includes(m.id));\n  }, [votes, movies]);\n\n  function handleSwipe(direction, movieId) {\n    const movie = movies.find(m => m.id === movieId);\n    const movieTitle = movie ? movie.title : movieId;\n    setLastDirection(direction + \" (\" + movieTitle + \")\");\n    if (direction === \"right\") {\n      setVotes((prev) => {\n        const copy = { userA: [...(prev.userA || [])], userB: [...(prev.userB || [])] };\n        if (!copy[currentUser].includes(movieId)) copy[currentUser].push(movieId);\n        return copy;\n      });\n    } else if (direction === \"left\") {\n      setVotes((prev) => {\n        const copy = { userA: [...(prev.userA || [])], userB: [...(prev.userB || [])] };\n        copy[currentUser] = copy[currentUser].filter((id) => id !== movieId);\n        return copy;\n      });\n    }\n  }\n\n  function addMovie(e) {\n    e.preventDefault();\n    if (!newTitle.trim()) return;\n    const id = Date.now().toString();\n    const movie = { id, title: newTitle.trim(), poster: newPoster.trim() };\n    setMovies((m) => [movie, ...m]);\n    setCurrentIndex(0);\n    setNewTitle(\"\");\n    setNewPoster(\"\");\n  }\n\n  async function resetAll() {\n    if (!window.confirm(\"Reset all movies and votes?\")) return;\n    setIsLoading(true);\n    try {\n      const freshMovies = await fetchTopRatedMovies();\n      setMovies(freshMovies);\n      setVotes({ userA: [], userB: [] });\n      setCurrentIndex(0);\n      localStorage.removeItem(STORAGE_KEY);\n    } catch (error) {\n      console.error('Error resetting movies:', error);\n      alert('Error resetting movies. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  function exportJSON() {\n    const blob = new Blob([JSON.stringify({ movies, votes }, null, 2)], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"swipeflicks_export.json\";\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n\n  async function searchMovies(query) {\n    if (!query.trim()) return;\n    \n    setIsSearching(true);\n    try {\n      // Using TMDB API (free, no API key required for basic search)\n      const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=d9b9ed074847fbc46cffd0144177f7dc&query=${encodeURIComponent(query)}&language=en-US&page=1&include_adult=false`);\n      const data = await response.json();\n      \n      if (data.results) {\n        const movies = data.results.slice(0, 10).map(movie => ({\n          id: movie.id.toString(),\n          title: movie.title,\n          poster: movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : null,\n          year: movie.release_date ? new Date(movie.release_date).getFullYear() : null\n        }));\n        setSearchResults(movies);\n      }\n    } catch (error) {\n      console.error('Error searching movies:', error);\n      alert('Error searching movies. Please try again.');\n    } finally {\n      setIsSearching(false);\n    }\n  }\n\n  function addMovieFromSearch(movie) {\n    const newMovie = {\n      id: Date.now().toString(),\n      title: movie.title,\n      poster: movie.poster\n    };\n    setMovies((m) => [newMovie, ...m]);\n    setCurrentIndex(0);\n    setSearchResults([]);\n    setSearchQuery(\"\");\n  }\n\n  function importJSON(e) {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (ev) => {\n      try {\n        const parsed = JSON.parse(ev.target.result);\n        if (parsed.movies) setMovies(parsed.movies);\n        if (parsed.votes) setVotes(parsed.votes);\n        setCurrentIndex(0);\n        alert(\"Imported!\");\n      } catch (err) {\n        alert(\"Invalid JSON file\");\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  const remaining = movies.slice(currentIndex);\n\n  function onCardSwiped(direction, movieId) {\n    handleSwipe(direction, movieId);\n    setTimeout(() => setCurrentIndex((ci) => Math.min(ci + 1, movies.length)), 50);\n  }\n\n  function programmaticSwipe(direction) {\n    if (remaining.length === 0) return;\n    const top = remaining[0];\n    handleSwipe(direction, top.id);\n    setCurrentIndex((ci) => Math.min(ci + 1, movies.length));\n  }\n\n  return (\n    <div\n      className=\"min-h-screen p-6 flex flex-col items-center transition-colors duration-200 bg-[#141414] text-white font-sans\"\n      style={{ fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\" }}\n    >\n      <div className=\"w-full max-w-3xl\">\n        <header className=\"flex items-center justify-between mb-6 bg-black px-6 py-4 rounded-lg shadow-lg\">\n          <h1 className=\"text-3xl font-bold text-white tracking-tight\">SwipeFlicks</h1>\n          <div className=\"flex items-center gap-6\">\n            <div className=\"text-sm text-gray-400\">\n              Two-person movie picker • Local-only\n              <br />\n              <span className=\"font-medium text-[#e50914]\">\n                {currentUser === \"userA\" ? \"You\" : \"Partner\"}: {votes[currentUser]?.length || 0} movies liked\n              </span>\n            </div>\n            <button\n              onClick={() => setIsDarkMode(!isDarkMode)}\n              className=\"p-2 rounded-full bg-[#e50914] text-white hover:bg-red-700 transition-all duration-300 ease-in-out\"\n              title={isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode'}\n            >\n              {isDarkMode ? '☀️' : '🌙'}\n            </button>\n          </div>\n        </header>\n\n        <section className=\"mb-6 flex gap-2 items-center\">\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-sm text-gray-400\">Current:</label>\n            <button\n              onClick={() => setCurrentUser(\"userA\")}\n              className={`px-3 py-1 rounded font-semibold transition-all duration-300 ease-in-out ${\n                currentUser === \"userA\"\n                  ? \"bg-[#e50914] text-white hover:bg-red-700\"\n                  : \"bg-transparent border border-white text-white hover:bg-white hover:text-black\"\n              }`}\n            >\n              You\n            </button>\n            <button\n              onClick={() => setCurrentUser(\"userB\")}\n              className={`px-3 py-1 rounded font-semibold transition-all duration-300 ease-in-out ${\n                currentUser === \"userB\"\n                  ? \"bg-[#e50914] text-white hover:bg-red-700\"\n                  : \"bg-transparent border border-white text-white hover:bg-white hover:text-black\"\n              }`}\n            >\n              Partner\n            </button>\n          </div>\n          <div className=\"ml-auto flex gap-2\">\n            <button\n              onClick={async () => {\n                setIsLoading(true);\n                try {\n                  const freshMovies = await fetchTopRatedMovies();\n                  setMovies(freshMovies);\n                  setCurrentIndex(0);\n                  alert(`Movies refreshed! Loaded ${freshMovies.length} movies from TMDB.`);\n                } catch (error) {\n                  console.error('Error refreshing movies:', error);\n                  alert('Error refreshing movies. Please try again.');\n                } finally {\n                  setIsLoading(false);\n                }\n              }}\n              disabled={isLoading}\n              className={`px-3 py-1 rounded border transition-all duration-300 ease-in-out ${\n                isLoading\n                  ? 'bg-[#181818] text-gray-400 cursor-not-allowed'\n                  : 'border-white text-white bg-transparent hover:bg-white hover:text-black'\n              }`}\n            >\n              {isLoading ? '🔄 Refreshing...' : '🔄 Refresh Movies'}\n            </button>\n            <button\n              onClick={async () => {\n                try {\n                  const testUrl = 'https://api.themoviedb.org/3/movie/top_rated?api_key=d9b9ed074847fbc46cffd0144177f7dc&language=en-US&page=1&include_adult=false';\n                  console.log('Testing TMDB API with URL:', testUrl);\n                  const response = await fetch(testUrl);\n                  const data = await response.json();\n                  console.log('Raw TMDB API response text:', JSON.stringify(data, null, 2));\n                  alert(`TMDB API Test: Status ${response.status}, Found ${data.results?.length || 0} movies on page 1`);\n                } catch (error) {\n                  console.error('TMDB API test failed:', error);\n                  alert(`TMDB API test failed: ${error.message}`);\n                }\n              }}\n              className=\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\"\n            >\n              🧪 Test API\n            </button>\n            <button\n              onClick={exportJSON}\n              className=\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\"\n            >\n              Export\n            </button>\n            <label className=\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black cursor-pointer transition-all duration-300 ease-in-out\">\n              Import\n              <input type=\"file\" accept=\"application/json\" onChange={importJSON} className=\"hidden\" />\n            </label>\n            <button\n              onClick={resetAll}\n              className=\"px-3 py-1 rounded border border-[#e50914] text-[#e50914] bg-transparent hover:bg-[#e50914] hover:text-white transition-all duration-300 ease-in-out\"\n            >\n              Reset\n            </button>\n          </div>\n        </section>\n\n        <main className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          <div>\n            <div className=\"relative h-96 rounded-lg shadow-lg p-6 flex items-center justify-center overflow-hidden bg-[#181818]\">\n              {isLoading ? (\n                <div className={`flex flex-col items-center gap-3 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n                  <div>Fetching top 1000 movies from TMDB...</div>\n                  <div className=\"text-sm opacity-75\">This may take a few seconds</div>\n                </div>\n              ) : remaining.length === 0 ? (\n                <div className={isDarkMode ? 'text-gray-300' : 'text-gray-600'}>No more movies. Add some!</div>\n              ) : (\n                remaining.map((movie, idx) => {\n                  const depth = remaining.length - idx;\n                  const isTop = idx === 0;\n                  return (\n                    <div\n                      key={movie.id}\n                      style={{\n                        position: \"absolute\",\n                        zIndex: depth,\n                        left: \"50%\",\n                        top: \"50%\",\n                        transform: `translate(-50%, -50%) scale(${1 - idx * 0.02}) translateY(${idx * 8}px)`,\n                        transition: \"transform 200ms\"\n                      }}\n                      className=\"transition-all duration-300 ease-in-out\"\n                    >\n                      <SwipeCard\n                        id={movie.id}\n                        onSwipe={(dir) => onCardSwiped(dir, movie.id)}\n                        onCardLeftScreen={() => {}}\n                        disabled={!isTop}\n                        className={`w-64 md:w-80 h-48 md:h-64 rounded-lg shadow-lg overflow-hidden flex flex-col bg-[#181818] hover:scale-105 transition-all duration-300 ease-in-out`}\n                        style={{ touchAction: \"none\" }}\n                      >\n                        <div className=\"w-full h-full flex flex-col\">\n                          {movie.poster ? (\n                            <img\n                              src={movie.poster}\n                              alt={movie.title}\n                              className=\"object-cover h-2/3 w-full transition-all duration-300 ease-in-out shadow-md hover:scale-105\"\n                              onError={(e) => { e.currentTarget.style.display = 'none'; }}\n                              style={{ boxShadow: \"0 8px 24px rgba(0,0,0,0.5)\" }}\n                            />\n                          ) : (\n                            <div className=\"h-2/3 w-full flex items-center justify-center text-gray-400 bg-[#141414]\">No poster</div>\n                          )}\n                          <div className=\"p-3 flex items-center justify-between flex-1 bg-[#181818]\">\n                            <div className=\"flex-1\">\n                              <div className=\"font-semibold text-lg text-white\">{movie.title}</div>\n                              {movie.year && (\n                                <div className=\"text-xs text-gray-400\">{movie.year}</div>\n                              )}\n                              {movie.rating && (\n                                <div className=\"text-xs text-yellow-400\">⭐ {movie.rating}/10</div>\n                              )}\n                              {votes[currentUser]?.includes(movie.id) && (\n                                <div className=\"text-xs text-green-400 font-medium\">✓ You liked this</div>\n                              )}\n                            </div>\n                            <div className=\"text-sm text-gray-400\">Swipe → to like</div>\n                          </div>\n                        </div>\n                      </SwipeCard>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n\n            <div className=\"mt-3 p-3 rounded-lg shadow-lg flex flex-col items-center gap-3 bg-[#181818]\">\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => programmaticSwipe(\"left\")}\n                  className=\"px-4 py-2 border border-white text-white bg-transparent rounded transition-all duration-300 ease-in-out hover:bg-white hover:text-black\"\n                >←</button>\n                <button\n                  onClick={() => programmaticSwipe(\"right\")}\n                  className=\"px-4 py-2 bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\"\n                >→</button>\n              </div>\n\n              <form onSubmit={addMovie} className=\"flex flex-col items-center gap-3 w-full max-w-md\">\n                <button className=\"px-6 py-2 bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\">Add Movie</button>\n              </form>\n\n              <div className=\"w-full max-w-md\">\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    placeholder=\"Search for real movies...\"\n                    className=\"flex-1 border border-[#181818] p-2 rounded bg-[#141414] text-white placeholder-gray-400\"\n                  />\n                  <button\n                    onClick={() => searchMovies(searchQuery)}\n                    disabled={isSearching}\n                    className={`px-4 py-2 rounded transition-all duration-300 ease-in-out ${\n                      isSearching\n                        ? 'bg-[#181818] text-gray-400 cursor-not-allowed'\n                        : 'bg-[#e50914] text-white hover:bg-red-700'\n                    }`}\n                  >\n                    {isSearching ? 'Searching...' : 'Search'}\n                  </button>\n                </div>\n                {searchResults.length > 0 && (\n                  <div className=\"max-h-48 overflow-y-auto rounded border border-[#181818] bg-[#181818]\">\n                    {searchResults.map((movie) => (\n                      <div\n                        key={movie.id}\n                        className=\"p-2 border-b border-[#181818] last:border-b-0 hover:bg-[#222] cursor-pointer transition-all duration-300 ease-in-out\"\n                        onClick={() => addMovieFromSearch(movie)}\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          {movie.poster ? (\n                            <img src={movie.poster} alt={movie.title} className=\"w-12 h-16 object-cover rounded shadow\" />\n                          ) : (\n                            <div className=\"w-12 h-16 rounded flex items-center justify-center text-xs bg-[#222] text-gray-400\">No poster</div>\n                          )}\n                          <div className=\"flex-1\">\n                            <div className=\"font-medium text-white\">{movie.title}</div>\n                            {movie.year && <div className=\"text-xs text-gray-400\">{movie.year}</div>}\n                          </div>\n                          <button className=\"px-2 py-1 text-xs bg-[#e50914] text-white rounded hover:bg-red-700 transition-all duration-300 ease-in-out\">Add</button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"mt-3 p-3 rounded-lg shadow-lg bg-[#181818]\">\n              <div className=\"text-sm text-gray-400\">Last action: {lastDirection || \"—\"}</div>\n              <div className=\"mt-2 flex gap-2\">\n                <button\n                  onClick={() => setVotes({ ...votes, [currentUser]: [] })}\n                  className=\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\"\n                >\n                  Clear my likes\n                </button>\n                <button\n                  onClick={() => {\n                    const userAVotes = votes.userA?.map(id => movies.find(m => m.id === id)?.title || id) || [];\n                    const userBVotes = votes.userB?.map(id => movies.find(m => m.id === id)?.title || id) || [];\n                    const voteSummary = {\n                      \"You liked\": userAVotes,\n                      \"Partner liked\": userBVotes\n                    };\n                    alert(JSON.stringify(voteSummary, null, 2));\n                  }}\n                  className=\"px-3 py-1 rounded border border-white text-white bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\"\n                >\n                  Show votes\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <aside>\n            <div className=\"p-4 rounded-lg shadow-lg mb-4 bg-[#181818]\">\n              <h2 className=\"font-semibold mb-2 text-white\">Matches ({matches.length})</h2>\n              {matches.length === 0 ? (\n                <div className=\"text-sm text-gray-400\">No matches yet — keep swiping!</div>\n              ) : (\n                <ul className=\"space-y-2\">\n                  {matches.map((m) => (\n                    <li key={m.id} className=\"flex items-center gap-3\">\n                      {m.poster ? (\n                        <img src={m.poster} alt=\"\" className=\"w-12 h-16 object-cover rounded shadow\" onError={(e) => { e.currentTarget.style.display = 'none'; }} />\n                      ) : (\n                        <div className=\"w-12 h-16 rounded bg-[#222]\" />\n                      )}\n                      <div>\n                        <div className=\"font-medium text-white\">{m.title}</div>\n                        <div className=\"text-xs text-[#e50914]\">Both liked</div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n            <div className=\"p-4 rounded-lg shadow-lg mb-4 bg-[#181818]\">\n              <h3 className=\"font-semibold mb-2 text-white\">Quick stats</h3>\n              <div className=\"text-sm text-gray-300\">You liked: {(votes.userA || []).length}</div>\n              <div className=\"text-sm text-gray-300\">Partner liked: {(votes.userB || []).length}</div>\n              <div className=\"text-sm text-gray-300\">Movies from TMDB: {movies.length}</div>\n              <div className=\"text-xs text-gray-400\">Top 1000 rated movies</div>\n            </div>\n            <div className=\"p-4 rounded-lg shadow-lg bg-[#181818]\">\n              <h3 className=\"font-semibold mb-2 text-white\">Movie list</h3>\n              <div className=\"max-h-64 overflow-auto\">\n                <ul className=\"space-y-2 text-sm\">\n                  {movies.map((m) => (\n                    <li key={m.id} className=\"flex items-center justify-between gap-2\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"truncate font-medium text-white\">{m.title}</div>\n                        <div className=\"flex items-center gap-2 text-xs opacity-75 text-gray-400\">\n                          {m.year && <span>{m.year}</span>}\n                          {m.rating && <span>⭐ {m.rating}</span>}\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => setMovies((arr) => arr.filter(x => x.id !== m.id))}\n                          className=\"px-2 py-1 border border-[#e50914] text-[#e50914] rounded text-xs bg-transparent hover:bg-[#e50914] hover:text-white transition-all duration-300 ease-in-out\"\n                        >Delete</button>\n                        <button\n                          onClick={() => { const t = prompt('Edit title', m.title); if (t != null) { setMovies(ms => ms.map(mm => mm.id === m.id ? { ...mm, title: t } : mm)) } }}\n                          className=\"px-2 py-1 border border-white text-white rounded text-xs bg-transparent hover:bg-white hover:text-black transition-all duration-300 ease-in-out\"\n                        >Edit</button>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n          </aside>\n        </main>\n\n        <footer className=\"mt-6 text-sm text-gray-400\">Tip: Switch user to let your partner swipe — matches update when both like the same movie.</footer>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}